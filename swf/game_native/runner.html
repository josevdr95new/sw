<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Retro Runner</title>
    <style>
        body {
            background-color: #f7f7f7;
            color: #535353;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
            touch-action: none;
        }
        canvas {
            border-bottom: 2px solid #535353;
            image-rendering: pixelated;
            background-color: #f7f7f7;
            max-width: 95vw;
            max-height: 60vh;
        }
        .score { font-size: 24px; margin-bottom: 10px; }
        .title { font-size: 32px; margin-bottom: 10px; font-weight: bold; }
        .instructions { margin-top: 20px; font-size: 14px; }
    </style>
</head>
<body>
    <div class="title">RETRO RUNNER</div>
    <div class="score">SCORE: <span id="score">0</span></div>
    <canvas id="gameCanvas" width="600" height="200"></canvas>
    <div class="instructions">Tap to Jump</div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const scoreElem = document.getElementById("score");

        let score = 0;
        let gameSpeed = 5;
        let isGameOver = false;

        const dino = {
            x: 50,
            y: 150,
            w: 40,
            h: 40,
            dy: 0,
            jumpForce: 12,
            gravity: 0.6,
            grounded: false
        };

        let obstacles = [];

        function spawnObstacle() {
            let size = Math.floor(Math.random() * 30) + 20;
            obstacles.push({
                x: canvas.width,
                y: canvas.height - size,
                w: 20,
                h: size
            });
        }

        function drawDino() {
            ctx.fillStyle = "#535353";
            ctx.fillRect(dino.x, dino.y, dino.w, dino.h);
            // Eye
            ctx.fillStyle = "#f7f7f7";
            ctx.fillRect(dino.x + 25, dino.y + 10, 5, 5);
        }

        function drawObstacles() {
            ctx.fillStyle = "#535353";
            obstacles.forEach(ob => {
                ctx.fillRect(ob.x, ob.y, ob.w, ob.h);
            });
        }

        function update() {
            if (isGameOver) return;

            // Dino physics
            dino.dy += dino.gravity;
            dino.y += dino.dy;

            if (dino.y + dino.h > canvas.height) {
                dino.y = canvas.height - dino.h;
                dino.dy = 0;
                dino.grounded = true;
            } else {
                dino.grounded = false;
            }

            // Obstacles
            if (Math.random() < 0.015) spawnObstacle();

            obstacles.forEach((ob, index) => {
                ob.x -= gameSpeed;

                // Collision
                if (dino.x < ob.x + ob.w &&
                    dino.x + dino.w > ob.x &&
                    dino.y < ob.y + ob.h &&
                    dino.y + dino.h > ob.y) {
                    gameOver();
                }

                if (ob.x + ob.w < 0) {
                    obstacles.splice(index, 1);
                    score++;
                    scoreElem.textContent = score;
                    if (score % 10 === 0) gameSpeed += 0.2;
                }
            });
        }

        function gameOver() {
            isGameOver = true;
            alert("GAME OVER! Score: " + score);
            reset();
        }

        function reset() {
            score = 0;
            scoreElem.textContent = score;
            gameSpeed = 5;
            obstacles = [];
            dino.y = 150;
            dino.dy = 0;
            isGameOver = false;
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawObstacles();
            drawDino();
            update();
            requestAnimationFrame(draw);
        }

        function jump() {
            if (dino.grounded) {
                dino.dy = -dino.jumpForce;
                dino.grounded = false;
            }
        }

        window.addEventListener("keydown", e => {
            if (e.code === "Space" || e.code === "ArrowUp") jump();
        });
        canvas.addEventListener("touchstart", (e) => {
            e.preventDefault();
            jump();
        }, { passive: false });
        canvas.addEventListener("mousedown", jump);

        draw();
    </script>
</body>
</html>
